flow: zenoh-flow-example

vars:
  #BASE_DIR: "/path/to/zenoh-flow"
  BASE_DIR: "/Users/philip/dev/zenoh-flow"

sources:
  - id: zenoh-sub
    configuration:
      key-expressions:
        out: zf/getting-started/hello
    descriptor: "builtin://zenoh"

  - id: zenoh-pub
    configuration:
      key-expressions:
        out: zf/period-miss-detector
    descriptor: "builtin://zenoh"

operators:
  - id: period-miss-detector
    descriptor: "file://{{ BASE_DIR }}/examples/examples/period-miss-detector/period-miss-detector.yaml"

  - id: greetings-maker
    descriptor: "file://{{ BASE_DIR }}/examples/examples/greetings-maker/greetings-maker.yaml"

sinks:
  - id: file-writer
    descriptor: "file://{{ BASE_DIR }}/examples/examples/file-writer/file-writer.yaml"

  - id: zenoh-writer
    configuration:
      key-expressions:
        in: zf/getting-started/greeting
    descriptor: "builtin://zenoh"

links:
  - from:
      node: zenoh-sub
      output: out
    to:
      node: greetings-maker
      input: name

  - from:
      node: zenoh-pub
      output: out
    to:
      node: period-miss-detector
      input: in

  - from:
      node: period-miss-detector
      output: out
    to:
      node: file-writer
      input: in

  - from:
      node: greetings-maker
      output: greeting
    to:
      node: file-writer
      input: in

  - from:
      node: greetings-maker
      output: greeting
    to:
      node: zenoh-writer
      input: in
